(this.webpackJsonpfitness_tracker2=this.webpackJsonpfitness_tracker2||[]).push([[0],{87:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n(0),r=n(9),a=n.n(r),s=n(11),o=n(26),l=n(13),u=n(20),j=n.n(u),d=n(32),b="http://fitnesstrac-kr.herokuapp.com/api";var h=function(){return localStorage.getItem("auth-token")},O=function(e){localStorage.setItem("auth-token",e)};function x(){var e={"Content-Type":"application/json"};return h()&&(e.Authorization="Bearer ".concat(h())),e}var f=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var c,i,r,a,s,o,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l.length>2&&void 0!==l[2]&&l[2],i="".concat(b,"/users")+(c?"/register":"/login"),e.next=4,fetch(i,{method:"POST",headers:x(),body:JSON.stringify({username:t,password:n})});case 4:return r=e.sent,e.next=7,r.json();case 7:if(a=e.sent,s=a.error,a.user,o=a.token,!s){e.next=13;break}throw Error(s.message);case 13:o&&O(o);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(j.a.mark((function e(t,n,c){var i,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={method:t,headers:x()},c&&(i.body=JSON.stringify(c)),e.next=4,fetch("".concat(b).concat(n),i);case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),m=(n(87),n(141)),p=n(154),g=n(138),y=n(153),I=function(e){var t=e.setIsLoggedIn,n=Object(i.useState)(""),r=Object(s.a)(n,2),a=r[0],o=r[1],l=Object(i.useState)(""),u=Object(s.a)(l,2),b=u[0],h=u[1],O=Object(i.useState)(null),x=Object(s.a)(O,2),v=x[0],p=x[1];return Object(c.jsx)(g.a,{children:Object(c.jsxs)("form",{className:"loginForm",onSubmit:function(e){return e.preventDefault()},children:[Object(c.jsx)("h3",{children:"Register or Log In"}),v?Object(c.jsx)("h5",{className:"error",children:v}):null,Object(c.jsx)(y.a,{type:"text",value:a,onChange:function(e){return o(e.target.value)},placeholder:"username"}),Object(c.jsx)("br",{}),Object(c.jsx)(y.a,{type:"password",value:b,onChange:function(e){return h(e.target.value)},placeholder:"password"}),Object(c.jsx)("br",{}),Object(c.jsxs)("div",{children:[Object(c.jsx)(m.a,{style:{backgroundColor:"blue"},onClick:function(){var e=Object(d.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(a,b,!0);case 3:e.sent,t(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),p(e.t0.message),console.log("register attempt");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),children:"Register"}),Object(c.jsx)(m.a,{onClick:function(){var e=Object(d.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(a,b);case 3:e.sent,t(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),p(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),children:"Log In"})]})]})})},L=(n(91),n(145)),S=n(146),k=n(31),C=(n(92),n(61)),N=(n(93),n(142)),R=n(143),A=n(144),T=function(e){var t=e.masterRoutinesList;e.setMasterRoutineList;return t.map((function(e,t){e.id,e.creatorId;var n,i=e.activities,r=e.creatorName,a=e.goal,s=e.name;return Object(c.jsx)("div",{id:"routineCard",children:Object(c.jsxs)(N.a,{style:(n={width:"300px",border:"1px solid grey"},Object(C.a)(n,"width","500px"),Object(C.a)(n,"padding","10px"),n),children:[Object(c.jsx)(R.a,{children:Object(c.jsx)("h1",{children:s},t)}),Object(c.jsxs)(A.a,{children:[Object(c.jsxs)("h2",{children:["Goal: ",a]}),i?i.map((function(e,t){var n=e.name,i=e.description,r=e.duration,a=e.count;return Object(c.jsxs)("div",{className:"activity",children:[Object(c.jsxs)("h3",{className:"name",onClick:function(e){},children:["Activity: ",n]},t),Object(c.jsxs)("h4",{className:"description",children:["Description: ",i]}),Object(c.jsxs)("h4",{className:"duration",children:["Duration: ",r," mins. Repeat: ",a]})]})})):"",Object(c.jsxs)("h4",{onClick:function(e){},children:["Created by: ",r]})]})]})})}))},w=function(e){var t=Object(i.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(""),l=Object(s.a)(o,2),u=l[0],j=l[1],d=Object(i.useState)(null),b=Object(s.a)(d,2),h=(b[0],b[1],e.masterRoutinesList),O=e.setMasterRoutineList,x={name:r,goal:u,isPublic:!0};return Object(c.jsx)("div",{id:"NewRoutineForm",style:{marginTop:"200px"},children:Object(c.jsxs)("form",{className:"form-routine",style:{border:"1px solid black"},onSubmit:function(e){e.preventDefault(),v("POST","/routines",x).then((function(e){var t=e;console.log(t),function(e){var t=[e].concat(Object(k.a)(h));O(t),a(""),j("")}(t)})).catch((function(e){return console.error(e)})),console.log(x)},children:[Object(c.jsx)("h3",{children:"Create New Routine"}),Object(c.jsxs)("p",{children:["Routine Name:",Object(c.jsx)("input",{type:"text",placeholder:"Routine Name",value:r,onChange:function(e){return a(e.target.value)}})]}),Object(c.jsxs)("p",{children:["Routine Goal:",Object(c.jsx)("textarea",{type:"text",placeholder:"Routine Goal",value:u,onChange:function(e){return j(e.target.value)}})]}),Object(c.jsx)("button",{id:"form-routine-submit",children:"SUBMIT"})]})})},E=function(e){var t=e.masterActivitiesList,n=e.masterRoutinesList,r=e.getUserId,a=(e.setMasterActivitiesList,e.setMasterRoutineList),o=Object(i.useState)(""),l=Object(s.a)(o,2),u=l[0],j=l[1],d=Object(i.useState)(""),b=Object(s.a)(d,2),h=b[0],O=b[1],x=Object(i.useState)(""),f=Object(s.a)(x,2),m=f[0],p=f[1],g={activityId:u,count:h,duration:m},y=Object(k.a)(n);return y=y.filter((function(e){return e.creatorId===r})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{setMasterRoutineList:a,masterRoutinesList:n}),Object(c.jsx)("div",{children:y.map((function(e,i){var r=e.id,s=(e.creatorId,e.activities),o=(e.creatorName,e.goal),l=e.name;return Object(c.jsxs)("div",{className:"routineCard",style:{marginTop:"15px"},children:[Object(c.jsx)("h1",{children:l},i),Object(c.jsxs)("h2",{children:["Goal: ",o]}),s?s.map((function(e,t){e.id;var i=e.routineActivityId,r=e.name,s=e.description,o=e.duration,l=e.count;return Object(c.jsxs)("div",{className:"activity",children:[Object(c.jsxs)("h3",{className:"name",children:["Activity: ",r]}),Object(c.jsxs)("h4",{className:"description",children:["Description: ",s]}),Object(c.jsxs)("h4",{className:"duration",children:["Duration: ",o," mins. Repeat: ",l]}),Object(c.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),v("DELETE","/routine_activities/".concat(i)).then((function(e){console.log(e);var t=e;!function(e,t){var c=Object(k.a)(n),i=c.findIndex((function(t){return t.id===e}));c[i].activities.splice(t,1),a(c)}(e.routineId,t)})).catch((function(e){console.error(e)}))},children:"Delete this Activity"})]},t)})):"",Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),v("POST","/routines/".concat(r,"/activities"),g).then((function(e){console.log(e);var t=e;!function(e,t){var c=Object(k.a)(n),i=c.findIndex((function(t){return t.id===e}));c[i].activities.push(t),a(c)}(e.routineId,t)})).catch(console.error)},children:[Object(c.jsxs)("label",{children:["Add a new activity",Object(c.jsx)("select",{id:"dropDown",onChange:function(e){return j(e.target.value)},children:t.map((function(e,t){return Object(c.jsx)("option",{value:e.id,children:e.name},t)}))})]}),Object(c.jsx)("input",{type:"number",placeholder:"count",onChange:function(e){return O(e.target.value)}}),Object(c.jsx)("input",{type:"number",placeholder:"duration",onChange:function(e){return p(e.target.value)}}),Object(c.jsx)("input",{type:"submit",value:"Submit"})]})}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),v("DELETE","/routines/".concat(r)).then((function(e){!function(e){var t=n.filter((function(t){return t.id!==e}));a(t)}(e.id)})).catch(console.error)},children:"Delete this Routine"})]})}))})]})},D=(n.p,n(94),function(){var e=Object(i.useState)(!!h()),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(""),u=Object(s.a)(a,2),j=u[0],d=u[1],b=Object(i.useState)([]),O=Object(s.a)(b,2),x=O[0],f=O[1],m=Object(i.useState)([]),g=Object(s.a)(m,2),y=g[0],k=g[1],C=Object(i.useState)(!1),N=Object(s.a)(C,2),R=(N[0],N[1],Object(i.useState)(!1)),A=Object(s.a)(R,2),w=A[0],D=A[1];return Object(i.useEffect)((function(){v("GET","/users/me").then((function(e){d(e.id)})).catch((function(e){return console.error(e)}))}),[n]),Object(i.useEffect)((function(){Promise.all([v("GET","/routines"),v("GET","/activities")]).then((function(e){var t=e[0],n=e[1];f(t),k(n)})).catch((function(e){return console.error(e)}))}),[]),Object(c.jsx)(o.a,{children:Object(c.jsxs)("div",{className:"app",children:[Object(c.jsx)(L.a,{position:"absolute",style:{background:"#20639B"},children:Object(c.jsxs)(S.a,{children:[" ",Object(c.jsx)("div",{className:"nav-links",children:Object(c.jsx)(K,{isLoggedIn:n,setIsLoggedIn:r,setloginModalOpen:D})})]})}),Object(c.jsxs)("main",{className:"main-section",children:[n?null:Object(c.jsx)("div",{children:Object(c.jsx)(p.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:w,onClose:function(){D(!1)},children:Object(c.jsx)("div",{children:Object(c.jsx)(I,{setIsLoggedIn:r})})})}),Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:"/activities",children:Object(c.jsx)(q,{masterActivitiesList:y,setMasterActivitiesList:k,isLoggedIn:n})}),Object(c.jsx)(l.a,{path:"/routines",children:Object(c.jsx)(T,{masterRoutinesList:x,setMasterRoutineList:f})}),Object(c.jsx)(l.a,{path:"/myroutines",children:Object(c.jsx)(E,{masterActivitiesList:y,masterRoutinesList:x,getUserId:j,setMasterActivitiesList:k,setMasterRoutineList:f})})]})]})]})})}),M=n(156),F=n(157),G=n(152),U=n(71),B=n.n(U),P=n(155),J=n(151),V=n(149),W=n(150),Y=n(148),_=n(147),z=n(70),H=n.n(z),X=function(e){var t=Object(i.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(""),l=Object(s.a)(o,2),u=l[0],j=l[1],d=Object(i.useState)(!1),b=Object(s.a)(d,2),h=b[0],O=b[1],x=e.masterActivitiesList,f=e.setMasterActivitiesList,p=function(){O(!1)},g={name:r,description:u};console.log(x);return Object(c.jsxs)("div",{id:"NewActivityForm",children:[Object(c.jsx)(_.a,{color:"primary","aria-label":"add",onClick:function(){O(!0)},style:{position:"fixed",bottom:"1.5rem",right:"1.5rem"},children:Object(c.jsx)(H.a,{})}),Object(c.jsxs)(P.a,{open:h,onClose:p,"aria-labelledby":"form-dialog-title",children:[Object(c.jsx)(Y.a,{id:"form-dialog-title",children:"Create New Activity"}),Object(c.jsxs)(V.a,{children:[Object(c.jsx)(y.a,{autoFocus:!0,margin:"dense",id:"name",label:"Activity Name",type:"name",fullWidth:!0,value:r,onChange:function(e){return a(e.target.value)}}),Object(c.jsx)(W.a,{children:"Error message can go here."}),Object(c.jsx)(y.a,{autoFocus:!0,margin:"dense",id:"description",label:"Activity Description",type:"name",fullWidth:!0,value:u,onChange:function(e){return j(e.target.value)}}),Object(c.jsx)(W.a,{children:"Error message can go here."}),Object(c.jsxs)(W.a,{children:["The activity is ",r,".",1==x.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())}))?"ACTIVITY ALREADY EXISTS":null]})]}),Object(c.jsxs)(J.a,{children:[Object(c.jsx)(m.a,{onClick:function(){p(),a(""),j("")},color:"primary",children:"Cancel"}),Object(c.jsx)(m.a,{onClick:function(e){e.preventDefault(),v("POST","/activities",g).then((function(e){!function(e){var t=[].concat(Object(k.a)(x),[e]);f(t),a(""),j("")}(e),console.log(e),p()})).catch((function(e){return console.error(e)}))},color:"primary",children:"Submit"})]})]})]})},q=function(e){var t=e.masterActivitiesList,n=e.setMasterActivitiesList,i=e.isLoggedIn;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"activity-list",style:{marginTop:"200px"},children:[i?Object(c.jsx)(X,{masterActivitiesList:t,setMasterActivitiesList:n}):null,t.map((function(e,t){var n=e.name,i=e.description;return Object(c.jsx)("div",{className:"activity",children:Object(c.jsx)(g.a,{fixed:!0,style:{"z-index":"1"},children:Object(c.jsxs)(M.a,{children:[Object(c.jsx)(F.a,{expandIcon:Object(c.jsx)(B.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",style:{border:"4px solid black"},children:Object(c.jsx)("h3",{children:n})}),Object(c.jsx)(G.a,{style:{border:"2px solid black"},children:Object(c.jsx)("h4",{children:i})})]})})},t)}))]})})},K=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,i=e.setloginModalOpen;return Object(c.jsxs)("div",{id:"NavButtons",children:[Object(c.jsx)("h3",{children:"Fitness Tracker"}),Object(c.jsx)("div",{className:"menu",children:t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(o.b,{to:"/",children:Object(c.jsx)(m.a,{variant:"contained",color:"default",children:"HOME"})}),Object(c.jsx)(o.b,{to:"/myroutines",children:Object(c.jsx)(m.a,{variant:"contained",color:"default",children:"MY ROUTINES"})}),Object(c.jsx)(o.b,{to:"/routines",children:Object(c.jsx)(m.a,{variant:"contained",color:"default",children:"ROUTINES"})}),Object(c.jsx)(o.b,{to:"/activities",style:{color:"white",textDecoration:"none",fontWeight:"bold",fontFamily:"Roboto"},children:Object(c.jsx)(m.a,{variant:"contained",color:"default",children:"ACTIVITIES"})}),Object(c.jsx)(m.a,{onClick:function(){t&&i(!1),localStorage.removeItem("auth-token"),n(!1)},children:"LOG OUT"})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(o.b,{to:"/home",children:Object(c.jsx)(m.a,{className:"nav-button",variant:"contained",children:"HOME"})}),Object(c.jsx)(o.b,{to:"/routines",children:Object(c.jsx)(m.a,{variant:"contained",children:"ROUTINES"})}),Object(c.jsx)(o.b,{to:"/activities",children:Object(c.jsx)(m.a,{variant:"contained",children:"ACTIVITIES"})}),Object(c.jsx)(m.a,{className:"loginButton",color:"inherit",onClick:function(){i(!0)},children:"Login"})]})})]})};n(98);a.a.render(Object(c.jsx)(D,{}),document.getElementById("app"))}},[[99,1,2]]]);
//# sourceMappingURL=main.d082363b.chunk.js.map